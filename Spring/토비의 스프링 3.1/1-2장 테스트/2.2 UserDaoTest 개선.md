# Contents

- [2.2.1 테스트 검증의 자동화](#221-테스트-검증의-자동화)
- [2.2.2 테스트의 효율적인 수행과 결과 관리](#222-테스트의-효율적인-수행과-결과-관리)

# 2.2 UserDaoTest 개선

## 2.2.1 테스트 검증의 자동화

모든 테스트는 성공과 실패의 두 가지 결과를 가진다. 테스트의 실패는 다음 두 가지로 구분해볼 수 있다.

1. 테스트가 진행되는 동안에 에러가 발생해서
2. 테스트 작업 중에 에러가 발생하진 않았지만 그 결과가 기대한 것과 달라서

여기서는 첫 번째를 테스트 에러, 두 번째를 테스트 실패로 구분한다.

테스트 중 에러가 발생하는 것은 콘솔을 통해 쉽게 확인할 수 있다. 하지만, 테스트가 실패하는 것은 별도의 확인 작업과 그 결과가 있어야만 알 수 있다.

기존의 `UserDaoTest` 코드에서는 `get()` 메서드로 가져온 결과를 눈으로 확인하도록 콘솔에 출력하기만 했는데, 이를 코드로 자동화해볼 것이다.

테스트 결과의 검증 부분을 코드로 자동화하기 위해 아래와 같이 코드를 수정한다.

```java
public class UserDaoTest {
    public static void main(String[] args) throws ClassNotFoundException, SQLException {
        ApplicationContext context = new GenericXmlApplicationContext("applicationContext.xml");
        UserDao dao = context.getBean("userDao", UserDao.class);

        User user = new User();
        user.setId("whiteship");
        user.setName("백기선");
        user.setPassword("married");
        dao.add(user);
        System.out.println(user.getId() + " 등록 성공");

        User user2 = dao.get(user.getId());
        if (!user.getName().equals(user2.getName())) {
            System.out.println("테스트 실패 (name)");
        }
        else if (!user.getPassword().equals(user2.getPassword())) {
            System.out.println("테스트 실패 (password)");
        }
        else {
            System.out.println("조회 테스트 성공");
        }
    }
}
```

처음 `add()` 메서드에 전달한 `User` 오브젝트와 `get()`을 통해 가져오는 `User` 오브젝트의 값을 비교해서 일치하는지 확인한다. 만약 `add()` 메서드에서 에러가 발생한다면 `DB`에 정상적인 값이 들어가지 않으므로 `테스트 실패 (name)` 에러가 출력될 것이다.

## 2.2.2 테스트의 효율적인 수행과 결과 관리

### JUnit 테스트로 전환

### 테스트 메소드 전환

### 검증 코드 전환

### JUnit 테스트 실행
