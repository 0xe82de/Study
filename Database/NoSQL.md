## Content

- [NoSQL 등장 배경](#nosql-등장-배경)
- [NoSQL 특징](#nosql-특징)
- [CAP 이론](#cap-이론)
- [NoSQL 종류](#nosql-종류)

# NoSQL

## NoSQL 등장 배경

과거에는 비즈니스 모델이 다양하지 않았습니다. 대부분의 비즈니스 모델은 기업이 상품을 생산하고 고객에게 판매하는 것이었습니다.

![image](https://user-images.githubusercontent.com/68716284/174824798-59ecc54e-df21-4135-85c6-ccdff607d030.png)

이러한 비즈니스 모델에서 생성되는 데이터는 다음과 같은 특징을 가지고 있습니다.

- 데이터가 단순하지 않다.
- 데이터의 양이 많지 않다.

이러한 특징을 갖는 데이터를 관계형 데이터베이스를 관리해왔는데 그로 인해 얻을 수 있는 이점은 다음과 같습니다.

- 데이터는 항상 일관성을 유지한다.
- 데이터를 갱신할 경우 해당 데이터가 존재하는 테이블에서만 갱신하면 된다.
- 다양한 데이터(상품, 고객, 주문 등)의 관계를 정의하고 정규화를 통해 중복을 최소화할 수 있다.

![image](https://user-images.githubusercontent.com/68716284/174828372-4628b409-0e19-40b0-99df-ff1702adb7d9.png)

대부분의 비즈니스 모델에서 관계형 데이터베이스는 좋은 선택지가 되어왔습니다.

그런데 2000년대에 들어 새로운 종류의 비즈니스 모델이 등장합니다. 바로 페이스북, 유튜브와 같은 서비스입니다. 이러한 서비스는 다음의 특징을 가지즌 데이터를 만들어냈습니다.

- 데이터가 단순하다.
- 데이터의 양이 매우 많다.

이러한 데이터를 관계형 데이터베이스로 관리하기에는 큰 어려움이 있었습니다. 많은 양의 데이터를 한꺼번에 저장하거나 조회해야 했는데 기존의 관계형 데이터베이스는 여러 제약(테이블, 데이터 타입, 외래키 등)을 가지고 있었기 때문입니다.

**즉, 새로운 데이터 저장 기술의 필요성이 대두되었고 구글과 아마존이 각각 Bigtable, Dynamo라는 데이터 저장 기술을 발표합니다. 이 것이 NoSQL이 등장하는 계기가 되었습니다.**

> NoSQL은 Not Only SQL라는 의미를 가지고 있습니다.

## NoSQL 특징

NoSQL은 다음과 같은 특징을 가집니다.

- 공통된 형태의 데이터 저장 방식인 테이블 개념과 접근 방식인 SQL 개념이 없다. NoSQL 데이터베이스마다 특징이 매우 다르다. 따라서 NoSQL을 하나의 데이터베이스 제품군으로 정의할 수는 없으며, 관계형 데이터베이스와 다른 형태의 데이터베이스들을 총칭한다고 보는 것이 좋다.
  > eg. 한국 음식과 해외 음식
- 데이터를 자유롭게 저장할 수 있다. 새로운 데이터 필드를 쉽게 추가할 수도 있다.
  1. 첫 번째 회원 정보 저장 (아이디, 패스워드)
  2. 두 번째 회원 정보 저장 (아이디, 패스워드, 생일)
- NoSQL은 데이터 간의 관계를 정의하지 않는다. 즉, 조인이 없고 읽기 속도가 대체적으로 빠르다.
  - 주문 : 주문 정보, 상품 정보, 회원 정보
  - 상품 : 상품 정보
  - 회원 : 회원 정보
- 수평적 확장이 용이하다. 데이터베이스를 여러 개 연결하여 데이터를 저장하고 처리한다.
- 페타바이트 이상의 데이터를 저장할 수 있다.

## CAP 이론

CAP 이론은 분산된 데이터베이스 시스템이 일관성, 가용성, 부분결함 용인 3가지 특성 중 2가지 특성만을 충족할 수 있다는 이론입니다. NoSQL은 CAP 이론에 따라 분류될 수 있습니다.

### 일관성 (Consistency)

데이터는 항상 최신의 데이터로 유지됩니다. 이에 따라 모든 읽기에 대해 동일한 데이터를 반환합니다. 예를 들어, 데이터베이스의 인스턴스가 2개 이상일 때 어느 곳에 요청하더라도 동일한 데이터가 반환됩니다. 이를 위해 데이터를 갱신하면 데이터베이스의 모든 인스턴스에 데이터를 최신화할 필요가 있습니다.

### 가용성 (Availability)

실행 중인 데이터베이스는 모든 요청에 대해 정상적인 응답을 해야 합니다. 정상적인 응답을 하지 못하는 경우 가용성이 보장되지 않는 것입니다.

### 부분결함 용인 (Partitioning)

데이터베이스 인스턴스 간에 통신 장애가 발생하더라도 시스템이 정상적으로 동작해야 합니다.

![image](https://user-images.githubusercontent.com/68716284/174977530-3d764aa6-1419-41d4-b9cc-f3449a04d874.png)

## NoSQL 종류

### Key-Value

키와 밸류로 이루어진 데이터베이스입니다.

> Redis, AWS DynamoDB

#### 특징

- key는 유일하다.
- value에는 모든 데이터 타입을 저장할 수 있다.
- key-value가 하나로 묶인 단순한 구조로 속도가 빠르고 저장이 용이하다.

![image](https://user-images.githubusercontent.com/68716284/174976871-de982e4a-d9d3-4c2d-a852-b11e8e09291a.png)

이러한 특징을 갖는 Key-Value NoSQL은 성능 향상을 위해 캐싱용으로 쓰기 좋습니다.

### Document

JSON, XML을 사용하여 계층적으로 데이터를 저장하는 데이터베이스입니다.

> MongoDB, Azure Cosmos DB

#### 특징

- 관계형 데이터베이스에서 여러 테이블을 조인하여 조회하는 데이터를 하나의 Document에 저장해둘 수 있다. 즉, 읽기 속도가 빨라진다.
- Document 내부에서는 Key-Value 형식을 가지는데, Value가 Document가 될 수 있다. Key-Value NoSQL과의 차이점은 데이터를 계층적 문서로 저장한다는 점이다.
- 데이터를 여러 서버에 복제하여 분산 저장할 수 있다. 이를 통해 장애 대응을 효과적으로 할 수 있다.

![image](https://user-images.githubusercontent.com/68716284/174978333-c1f07270-781d-470a-af0a-2984c2583c25.png)

이러한 특징을 갖는 Document NoSQL은 대용량 데이터를 조회하고 저장할 때 쓰기 좋습니다. 그리고 계층적으로 다양한 속성을 갖는 데이터를 관리하기에 좋습니다.

### Wide Column

행마다 다른 값, 다른 개수의 스키마를 가질 수 있는 데이터베이스입니다.

> Cassandra, HBase, Google BigTable

#### 특징

- Key, Value를 저장할 때 각각 다른 값, 갯수의 스키마를 가질 수 있습니다.
- 확장성이 뛰어납니다.

![image](https://user-images.githubusercontent.com/68716284/174977019-d7f26672-7b2c-4154-8e38-90f77d9f18d2.png)

이러한 특징을 갖는 Wide Column NoSQL은 대용량 데이터를 압축하거나 분산, 집계 처리할 때 쓰기 좋습니다.

### Graph

데이터를 노드와 엣지로 표현하는 데이터베이스입니다. 엣지는 노드 사이의 관계를 의미합니다.

> Neo4j, OrientDB

#### 특징

- 관계가 이미 정의되어 있으므로 조인이 필요없다.
- 관계형 데이터베이스에 비해 성능이 좋고 데이터 관리에 유연하다.

![image](https://user-images.githubusercontent.com/68716284/174977212-cfdbf4da-6dfa-4902-90c4-bd58bf7fd8d7.png)

이러한 특징을 갖는 Graph NoSQL은 SNS와 같은 서비스에서 쓰기 좋습니다.

### 기타

![image](https://user-images.githubusercontent.com/68716284/174843287-2335f37f-4047-4617-99d6-253d642ca618.png)

> 출처 : https://towardsdatascience.com/datastore-choices-sql-vs-nosql-database-ebec24d56106
