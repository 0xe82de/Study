# 1주차 JVM은 무엇이며 자바 코드는 어떻게 실행하는 것인가.

## 목차

- [JVM이란 무엇인가](#JVM이란-무엇인가)
- [컴파일 하는 방법](#컴파일-하는-방법)
- [실행하는 방법](#실행하는-방법)
- [바이트코드란 무엇인가](#바이트코드란-무엇인가)
- [JIT 컴파일러란 무엇이며 어떻게 동작하는지](#JIT-컴파일러란-무엇이며-어떻게-동작하는지)
- [JVM 구성 요소](#JVM-구성-요소)
- [JDK와 JRE의 차이](#JDK와-JRE의-차이)

## JVM이란 무엇인가

### JVM

JVM은 "Java Virtual Machine"의 약자로 자바로 작성된 바이트 코드 파일을 실행하기 위한 가상 머신입니다.

자바로 작성된 모든 애플리케이션은 JVM에서만 실행되므로 자바 애플리케이션을 실행하려면 반드시 JVM이 필요합니다.

자바는 OS에 독립적인 언어로 JVM만 설치되어 있다면 어떠한 OS에서도 실행될 수 있습니다. 하지만, JVM의 경우 OS에 종속적이므로 OS에 맞는 JVM을 사용해야 합니다.

## 컴파일 하는 방법

자바 소스파일을 컴파일하기 위해서는 다음의 프로그램이 사용됩니다.

- javac.exe

javac.exe 프로그램은 자바의 컴파일러로 자바 소스코드를 바이트 코드로 컴파일합니다.

`c:\example>javac Hello.java`

또는 IDE에서 소스코드를 작성한 후에 IDE를 통해 컴파일을 할 수도 있습니다.

## 실행하는 방법

컴파일된 바이트 코드를 실행하기 위해서는 다음의 프로그램이 사용됩니다.ㅏ

- java.exe

java.exe 프로그램은 바이트 코드를 해석하고 실행해줍니다.

`c:\example>java Hello`

## 바이트코드란 무엇인가

자바의 바이트 코드란 JVM이 이해할 수 있는 언어로 변환된 코드를 의미합니다. 이러한 바이트 코드의 확장자는 .class이며, JVM이 설치되어 있다면 어떠한 OS에서도 실행될 수 있습니다.

## JIT 컴파일러란 무엇이며 어떻게 동작하는지

JIT(Just-in-time) 컴파일은 실제 실행하는 시점에 기계어로 번역하는 컴파일 기법입니다.

JIT 컴파일 기법의 도입 배경으로는 자바의 속도가 느리다는 점에 있습니다. 자바 프로그램은 실행하기까지 컴파일과 인터프리터 방식을 모두 거치게 됩니다.

- 컴파일 : 소스 코드를 한 번에 기계어로 변환하여 속도가 빠르다는 장점이 있습니다.
- 인터프리터 : 실행 시에 소스 코드를 한 줄 씩 읽어서 기계어로 변환하기 때문에 속도가 느리지만 이식성이 높다는 장점이 있습니다.

JIT 컴파일러는 처음 실행될 때 인터프리터를 하면서 자주 사용되는 코드를 캐싱하고 이후에는 캐싱된 코드를 가져다 쓰기 때문에 실행 속도를 향상시킬 수 있습니다. 이를 Java에서도 적용하여 바이트 코드를 기계어로 해석할 때 JIT 컴파일을 적용합니다.

C, Python 등 다른

바이트코드를 다으웨어의 기계어로 변환해주는 JIT 컴파일러와 향상된 최적화 기술을 통해 속도가 향상되었다.

## JVM 구성 요소

### Class Loader

JVM으로 클래스 파일을 로드시키는 역할을 하며, 필요할 때마다 동적으로 클래스 파일을 올려줍니다.

동작 순서는 로딩(클래스 읽기) -> 링킹(레퍼런스 연결) -> 초기화의 단계로 진행됩니다.

### Memory

1. 힙

   힙 영역은 객체를 저장하는데, 모든 JVM 쓰레드에 공유되는 공유자원입니다. 힙에 저장된 데이터는 무조건 GC에 의해서만 회수가 됩니다.

2. 메서드

   메서드 영역에서는 런타임 상수, 필드와 데이터를 저장합니다.

3. JVM 스택

   쓰레드 마다 런타임 스택을 만들고 JVM 스택에 프레임이 저장됩니다. 메서드 하나가 호출될 때마다 새로운 프레임이 생성되어 스택에 쌓이고, 메서드가 종료되거나 예외가 발생하면 프레임은 사라집니다.

4. Native 메서드 스택

   Native 메서드 스택은 JVM의 스택이 아니라 C 스택을 의미합니다. 자바가 아닌 다른 언어로 작성된 Native 메서드를 지원하기 위해 사용되는 스택입니다.

### Excution Engine

클래스 로딩 과정을 통해 변환된 바이트 코드를 해석하여 실행합니다.

## JDK와 JRE의 차이

### JDK

JDK는 자바 프로그램을 작성하고 JRE를 실행하는데 필요한 Tool을 가지고 있습니다. JDK는 JRE를 포함하며 JRE는 JVM을 포함하고 있습니다. 따라서, JRE와 개발에 필요한 Tool을 JDK가 제공해주는 것입니다.

### JRE

JRE는 클래스 라이브러리, JVM 등을 가지고 있습니다. 컴파일을 위한 javac 프로그램은 JDK에 포함되어 있으며, 실행을 위한 java 프로그램은 JRE에 포함되어 있습니다.
