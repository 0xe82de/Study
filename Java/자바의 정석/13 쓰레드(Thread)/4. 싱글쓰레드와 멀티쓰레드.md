# 4. 싱글쓰레드와 멀티쓰레드

두 개의 작업을 하나의 쓰레드로 처리하는 경우와 두 개의 쓰레드로 처리하는 경우를 가정해보자. 두 개의 작업을 수행한 시간은 거의 같다. 오히려 한 개의 싱글쓰레드로 작업한 시간이 더 빠르게 종료되는데, 이는 쓰레드간의 `작업 전환(context switching)`에 시간이 걸리기 때문이다.

`작업 전환`을 할 때는 현재 진행 중인 작업의 상태, 예를 들면 다음에 실행해야할 위치(PC, 프로그램 카운터) 등의 정보를 저장하고 읽어 오는 시간이 소요된다. 참고로 쓰레드의 스위칭에 비해 프로세스의 스위칭이 더 많은 정보를 저장해야하므로 더 많은 시간이 소요된다. 프로세스 또는 쓰레드 간의 작업 전환을 `컨텍스트 스위칭`이라고 한다.

따라서, 싱글 코어에서 CPU만을 사용하는 계산작업이라면 싱글쓰레드로 개발하는 것이 더 효율적이다.

멀티쓰레드로 작업하더라도 코어의 개수에 따라서 차이가 발생하게 된다. 싱글 코어인 경우에는 멀티쓰레드라도 하나의 코어가 작업을 번갈아 가며 수행하기 때문에, 두 작업이 절대 겹치지 않는다. 멀티 코어의 경우 멀티쓰레드로 두 작업을 수행하면, 동시에 두 쓰레드가 수행될 수 있으므로 두 작업이 겹치는 부분이 발생한다. 즉, 화면(console)이라는 자원을 놓고 두 쓰레드가 경쟁하게 되는 것이다.

두 쓰레드가 서로 다른 자원을 사용하는 작업의 경우, 멀티쓰레드 프로세스가 더 효율적이다.

예를 들면, 사용자로부터 데이터를 입력받는 작업, 네트워크로 파일을 주고받는 작업, 프린터로 파일을 출력하는 작업과 같이 외부기기와의 입출력을 필요로 하는 경우가 이에 해당한다.

만약 사용자로부터 입력받는 작업 A와 출력하는 작업 B를 하나의 쓰레드로 처리한다면 사용자가 입력을 마칠때까지 작업 B는 아무 일도 하지 못하고 기다려야만 한다. 그러나, 두 개의 쓰레드로 처리한다면 작업 A가 대기중이더라도 작업 B는 일을 할 수 있게 된다.
