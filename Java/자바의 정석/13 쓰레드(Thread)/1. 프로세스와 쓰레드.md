# 1. 프로세스와 쓰레드

`프로세스(process)`란 `실행 중인 프로그램(process)`를 의미한다. 프로그램을 실행하면 운영체제로부터 실행에 필요한 자원(메모리)을 할당받아 프로세스가 된다.

프로세스는 데이터, 메모리 등의 자원과 `쓰레드`로 구성되어 있다. 이 때, 프로세스의 자원을 이용해서 실제로 작업을 수행하는 것이 바로 `쓰레드`이다.

모든 프로세스에는 최소 1개 이상의 쓰레드가 존재하며, 2개 이상의 쓰레드를 가진 프로세스를 `멀티쓰레드 프로세스(multi-threaded process)`라고 한다.

프로세스가 가질 수 있는 쓰레드의 개수는 한정적이지 않지만, 일반적으로 프로세스의 메모리 한계에 따라 가질 수 있는 쓰레드의 개수가 정해진다. 쓰레드가 작업을 수행할 때 별개의 메모리 공간(호출스택)을 필요로 하기 때문이다.

### 멀티태스킹과 멀티쓰레딩

현재 사용되는 대부분의 운영체제(Windows, Unix, Linux, Mac 등)는 `멀티태스킹(multi-tasking, 다중작업)`을 지원하므로 여러 개의 프로세스가 동시에 실행될 수 있다.

`멀티쓰레딩`은 하나의 프로세스에서 여러 쓰레드가 동시에 작업을 수행하는 것이다. CPU의 코어가 한 번에 하나의 작업만 수행할 수 있기 때문에 실제로 동시에 처리되는 작업의 개수는 코어의 개수와 동일하다. 그러나 일반적으로 작업의 개수가 코어의 개수보다 많기 때문에 각 코어가 여러 작업을 번갈아 가며 수행함으로써 여러 작업들이 동시에 수행되는 것처럼 보이게 된다.

따라서, 프로세스의 성능이 단순히 쓰레드의 개수에 비례하는 것은 아니다. 오히려 하나의 쓰레드를 가진 프로세스가 두 개의 쓰레드를 가진 프로세스보다 더 좋은 성능을 보일 수 있다.

### 멀티쓰레딩의 장단점

- CPU의 사용률을 향상시킨다.
- 자원을 보다 효율적으로 사용할 수 있다.
- 사용자에 대한 응답성이 향상된다.
- 작업이 분리되어 코드가 간결해진다.

메신저로 채팅하면서 파일을 다운로드 받거나 음성대화를 나눌 수 있는 것이 바로 `멀티쓰레드`가 사용되기 때문이다. 만약 싱글쓰레드를 사용한다면 파일을 다운로드 받는 동안에는 다른 일을 할 수 없게 된다.

쓰레드를 가벼운 프로세스, 즉 경량 프로세스(LWP, light-weight-process)라고 부르기도 한다.

`멀티쓰레딩`에는 장점만 있는 것은 아니다. 여러 쓰레드가 프로세스 내에서 자원을 공유하기 때문에 `동기화(synchronization)`, `교착상태(deadlock)`와 같은 문제들이 발생할 수 있다. 교착상태란 두 쓰레드가 자원을 점유한 상태에서 서로 상대편이 점유한 자원을 사용하려고 대기중인 상태를 말한다.
