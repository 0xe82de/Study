# Content

- [UML](#uml)
- [UML은 왜 써야 하는가](#uml은-왜-써야-하는가)
- [UML은 언제 써야 하는가](#uml은-언제-써야-하는가)
- [UML은 어떻게 써야 하는가](#uml은-어떻게-써야-하는가)
- [다이어그램 예제](#다이어그램-예제)

# UML

UML(Unified Modeling Language)은 소프트웨어 개념을 다이어그램으로 그리기 위해 사용하는 시각적인 표기법입니다. 문제 도메인(problem domain), 소프트웨어 설계 제안 등에서 UML을 사용할 수 있습니다.

UML의 주요 다이어그램은 세 종류로 나뉩니다.

|       구분        | 설명                                                                                                                                 |
| :---------------: | :----------------------------------------------------------------------------------------------------------------------------------- |
| 정적 다이어 그램  | 클래스, 객체, 데이터 구조의 관계를 UML로 표현해서 변하지 않는 논리적 구조를 보여줍니다.                                              |
|  동적 다이어그램  | 실행 흐름을 그림으로 그리거나 상태가 어떻게 바뀌는지 UML로 표현해서 소프트웨어 안의 실체가 실행 도중 어떻게 변하는지 보여줍니다.     |
| 물리적 다이어그램 | 소스 파일, 바이너리 파일, 데이터 파일 등 물리적 실체의 관계를 UML로 표현해서 소프트웨어 실체의 변하지 않는 물리적 구조를 보여줍니다. |

## UML은 왜 써야 하는가

엔지니어들은 본 작업을 시작하기 전에 모델을 만듭니다. 예를 들어 항공 엔지니어는 비행기 모델을 만들고 제대로 날 수 있는지 확인합니다. 건축가는 건물의 모델을 건축주에게 보여줌으로써 건물의 모습이 괜찮은지 확인합니다.

왜 모델을 만들까요? 실제로 비행기를 만들거나 건물을 짓는 것 보다 훨씬 저렴하기 때문입니다. 소프트웨어 모델도 이와 같은 이유로 만들며 이 때 UML이 사용됩니다.

## UML은 언제 써야 하는가

소프트웨어 기능을 구현하기 위한 아이디어가 떠올랐을 때 기획자, 개발자, 디자이너 등 동료들과 의견을 나눌 수 있습니다.

책 `UML 실전에서는 이것만 쓴다`의 저자 `로버트 C. 마틴`은 아래와 같이 다이어그램을 그려야할 경우와 그리지 말아야할 경우를 제시합니다.

### 다이어그램을 그려야 할 경우

- 여러 사람이 동시에 작업하는 상황에서 특정한 부분의 구조를 모두가 이해해야 할 때
- 두 명 이상이 특정 요소를 어떻게 설계해야 할지 의견이 다르고, 팀의 의견을 모을 필요가 있을 때
- 어떤 설계 아이디어로 이것저것 시도해 보고 싶을 때
- 누군가에게 또는 자신에게 코드 일부분의 구조를 설명할 때

### 다이어그램을 그리지 말아야 할 경우

- 공정에서 다이어그램을 그려야 한다고 해서 다이어그램을 그리지 마라.
- 다이어그램을 그리지 않으면 죄책감을 느끼거나, 훌륭한 설계자는 누구나 다이어그램을 그린다는 생각이 든다고 다이어그램을 그리지 마라.
- 설계 단계의 포괄적인 문서를 만들기 위해서 다이어그램을 그리지 마라.

UML을 사용하면 대부분 쉽고 빠르게 생각을 공유할 수 있습니다. 특히 코드를 직접 작성하는 것보다 다이어그램을 그리는 것이 간단하므로 적절하게 UML을 사용하면 큰 효과를 볼 수 있습니다. 하지만 일부의 경우에 너무 많은 다이어그램을 만들거나 끝없는 논쟁을 하여 많은 시간이 소요될 수 있습니다. 따라서 UML은 필요한 경우에 효과적으로 사용해야 합니다.

## UML은 어떻게 써야 하는가

1. UML로 만든 다이어그램은 반복적 방식으로 만들어야 하며, 반복 주기도 짧아야 합니다. 동적 다이어그램과 정적 다이어그램을 5분이나 더 짧은 주기로 반복하며 동시에 발전시키는 것이 중요합니다.
2. UML CASE 도구는 생산성을 고려해서 사용 결정을 해야 합니다. 대부분의 개발팀에는 도움보다 방해가 되기 쉽습니다. CASE 도구를 별도로 도입하지 않고 칠판과 펜만으로도 충분한 효과를 볼 수 있습니다.
3. UML은 도구일 뿐입니다. 설계에 대한 아이디어를 다른 사람에게 전달할 때 도움이 될 수 있지만 남용하지 않고 적절하게 사용해야 합니다. 남용하면 불필요한 시간을 낭비할 수 있습니다.

## 다이어그램 예제

UML로 다이어그램을 만들 때 협력 다이어그램을 먼저 만드는 것이 좋습니다. 소프트웨어에서 객체 간에 어떤 협력이 있는지, 어떤 객체가 필요한지를 알 수 있습니다. 그 다음 1개의 객체를 1개의 클래스로 대응하여 클래스 다이어그램을 만들고 변수, 메서드 등을 표현합니다. 이 과정에서 시퀀스 다이어그램, 객체 다이어그램, 상태 다이어그램, 유스케이스 등이 사용될 수 있지만 협력 다이어그램과 클래스 다이어그램만으로도 큰 효과를 볼 수 있습니다. 여기서는 `숫자 게임`을 예제로 사용합니다.

### 숫자 게임 기능

숫자 게임의 기능은 다음과 같습니다.

- 플레이어는 숫자 1개를 입력합니다.
- 플레이어가 입력한 숫자가 상대방의 숫자와 일치하면 게임에 승리하고 게임은 종료됩니다. 일치하지 않으면 게임은 계속됩니다.
- 상대방은 컴퓨터가 되며 게임이 시작될 때 임의의 숫자 1개를 가집니다.

> 아래에 나오는 다이어그램은 완성된 다이어그램이 아닙니다. 어디까지나 설명을 위한 다이어그램이니 미흡한 부분이 있을 수 있습니다.

### 숫자 게임 협력 다이어그램 1

![image](https://user-images.githubusercontent.com/68716284/178696608-77e71a4d-674a-4fd5-aa07-d968851baf23.png)

협력 다이어그램을 그려보면서 어떤 협력이 필요한지, 협력을 수행할 객체는 무엇인지 생각해볼 수 있습니다.

필요한 객체는 아래의 네 가지가 될 수 있습니다.

- 플레이어
- 숫자 게임
- 컴퓨터
- 디스플레이

각 객체는 코드로 작성할 때 클래스 하나씩 매칭됩니다.

### 숫자 게임 클래스 다이어그램 1

![image](https://user-images.githubusercontent.com/68716284/178689624-e001d09e-db89-4c29-bb72-bf6890699b56.png)

현재 클래스 다이어그램에서는 플레이어 클래스가 숫자 게임 클래스를 의존하고 있습니다.

```java
public class Player {

    private final NumberGame numberGame;

    //...
}
```

만약 다른 게임이 추가된다면 아래와 같이 플레이어 클래스는 모든 게임들을 의존해야 합니다. 이 것에 대해서 더 좋은 방법을 고민해볼 수 있습니다.

```java
public class Player {

    private final NumberGame numberGame;

    private final OtherGame1 otherGame1;

    private final OtherGame2 otherGame2;

    //...
}
```

### 숫자 게임 클래스 다이어그램 2

![image](https://user-images.githubusercontent.com/68716284/178697662-60b88a14-40e6-45c4-84a4-a3897e4a4c3f.png)

숫자 게임 클래스를 게임 인터페이스로 추상화하고 플레이어 클래스가 게임 인터페이스에 의존하도록 합니다. 실제 협력은 게임 인터페이스를 구현한 숫자 게임 클래스가 수행하게 되며 플레이어 클래스는 모든 게임 클래스를 의존할 필요가 없게 됩니다.

```java
public class Player {

    private final Game game;

    //...
}
```

### 숫자 게임 협력 다이어그램 2

![image](https://user-images.githubusercontent.com/68716284/178698204-a210b080-232f-4cdd-8c65-cc36dcebd897.png)

개선된 클래스 다이어그램을 협력 다이어그램에도 반영합니다.

결과적으로 협력 다이어그램과 클래스 다이어그램을 번갈아 수정하며 필요한 객체들과 객체 간의 협력을 파악하였습니다. 또한 인터페이스를 사용하여 플레이어 객체와 게임 객체의 결합도를 낮추었습니다.

이처럼 UML을 적절하게 사용해서 다이어그램을 그리면 소프트웨어 설계에 대한 고민을 동료들과 쉽게 나눌 수 있고 좋은 설계를 할 수 있게 됩니다.
